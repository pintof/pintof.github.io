<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Dictionary Lookup Tool</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  </head>
  <body>
    <h1><b>Dictionary Lookup Tool</b></h1>
    <input type="text" id="query" placeholder="Enter word to lookup" />
    <input type="button" onclick="lookup($('#query').val())" value="Lookup" />
    <br />
    <br />
    <div id="text_result"></div>
    <br />
    <div id="image_result"></div>
  </body>
  <script>
    async function lookup(query) {
      const url = `https://dictionaryapi.com/api/v3/references/collegiate/json/${query}?key=6b434ca6-7350-4807-b455-6f29aad7cc46`;
      const response = await fetch(url);
      const data = await response.json();
      try {
        // see if second entry exists, populate it's result if it does
        data[0].def[0].sseq[0][1][1].dt[0][1];
        $("#text_result").fadeOut(500, function () {
          $(this)
            .html("<b>Definition: </b>" + data[0].def[0].sseq[0][1][1].dt[0][1])
            .fadeIn(500);
        });
      } catch {
        try {
          // see if first entry exists, populate it's result if it does
          data[0].def[0].sseq[0][0][1].dt[0][1];
          $("#text_result").fadeOut(500, function () {
            $(this)
              .html(
                "<b>Definition: </b>" + data[0].def[0].sseq[0][0][1].dt[0][1]
              )
              .fadeIn(500);
          });
        } catch {
          // if first & second entry did not exist for given word, populate word not found
          $("#text_result").fadeOut(500, function () {
            $(this).html("<b>Definition: </b> Word not found").fadeIn(500);
          });
        }
      }

      // if image exists, populate it's result, if not populate no image found pic
      $("#image_result").fadeOut(500, function () {
        $(this)
          .html(
            `<b>Illustration: </b><br /><img id='image' src='https://www.merriam-webster.com/assets/mw/static/art/dict/${query}.gif' onerror="javascript: $('#image').attr('src','https://i.imgur.com/D1nM11A.png')" />`
          )
          .fadeIn(500);
      });
      console.log(data);
    }
  </script>
</html>
